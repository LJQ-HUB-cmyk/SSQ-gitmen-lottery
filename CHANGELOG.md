# 📝 更新日志

## [3.1.0] - 2025-11-19

### 🎯 新增功能
- **多策略预测配置**：支持通过 `.env` 配置多种预测策略
- **策略组合预测**：可同时使用 frequency、balanced、coldHot、random 策略
- **灵活预测数量**：每种策略可配置生成的组合数量

### 🔧 修复问题
- **预测策略配置问题**：修复预测器只使用单一策略的问题
- **配置读取缺失**：所有预测器调用现在正确读取环境变量配置
- **策略参数传递**：修复预测器构造时缺少策略参数的问题

### 📊 改进内容
- **预测结果丰富化**：从单一策略5组提升到多策略20组（可配置）
- **日志信息完善**：清晰显示每种策略的使用情况和生成结果
- **配置驱动设计**：完全通过 `.env` 文件控制预测行为

### 🔄 修改文件
- `cli/fetch.py` - 增量爬取预测功能
- `cli/predict.py` - 独立预测命令
- `cli/schedule.py` - 定时任务预测
- `README.md` - 更新文档和配置说明
- `docs/ARCHITECTURE.md` - 更新架构说明

### 📋 配置示例
```bash
# 新增配置项
DEFAULT_STRATEGIES=frequency,balanced,coldHot,random  # 使用的策略
DEFAULT_PREDICTION_COUNT=5                            # 每种策略生成组合数
```

### ✅ 向后兼容
- 完全向后兼容现有配置
- 如果未配置策略，使用默认的 frequency 策略
- 现有预测逻辑保持不变

---

## [3.0.0] - 2025-11-18

### 🚀 重大更新
- **统一爬虫接口**：Python 和 Cloudflare Worker 使用相同的爬取逻辑
- **智能全量爬取**：逐年推进模式，自动完成所有年份数据爬取
- **统一增量逻辑**：从数据库最新期号自动开始增量更新
- **Telegram 消息优化**：格式统一，支持策略显示

### 🔧 架构改进
- **模块化设计**：核心框架与彩票模块分离
- **配置统一管理**：所有配置集中在 `core/config.py`
- **双版本支持**：Python 本地版 + Cloudflare Worker 云端版

### 📚 文档完善
- 完整的架构说明文档
- 详细的部署指南
- API 使用文档
- Telegram 配置指南

---

## [2.x.x] - 历史版本

### 基础功能
- 双色球和大乐透数据爬取
- 基础预测算法
- 数据库存储
- 基本的 Telegram 通知

---

**版本规范**：
- 主版本号：重大架构变更
- 次版本号：新功能添加
- 修订版本号：问题修复和小改进