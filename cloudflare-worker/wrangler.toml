name = "lottery-prediction"
main = "src/index.js"
compatibility_date = "2024-01-01"

# 环境变量
[vars]
ENVIRONMENT = "production"
DEFAULT_STRATEGIES = "frequency,random,balanced,coldHot"  # 默认预测策略（免费计划优化：减少策略数量）
DEFAULT_PREDICTION_COUNT = "4"    # 默认预测条数（免费计划优化：减少预测数量）

# Telegram 频道配置
TELEGRAM_CHANNEL_ID = "@renren500w"
TELEGRAM_SEND_TO_BOT = "false"
TELEGRAM_SEND_TO_CHANNEL = "true"

# 爬取配置（优化后）
SLEEP_TIME=30               # 每次爬取间隔（秒）- 优化：减少等待时间
DAILY_REQUEST_LIMIT=1000    # 每日请求限制 - 优化：小批量处理，可以增加次数
AUTO_CONTINUE=false         # 是否自动跨天继续（true=自动，false=手动）


# D1 数据库绑定
[[d1_databases]]
binding = "DB"
database_name = "lottery_db"
database_id = "01343890-8135-492e-b9c5-34b57a4532e1"

# KV 命名空间绑定（用于存储配置）
[[kv_namespaces]]
binding = "KV_BINDING"
id = "60a5e4f34c4e46e9aedcf7a3cb4d52ea"

# Cron 触发器配置
# 每天晚上22:00 北京时间执行（UTC 时间 14:00）
[triggers]
crons = ["00 14 * * *"]

# 说明：
# 1. Cron 表达式: "00 14 * * *"每天晚上22:00 北京时间执行（UTC 时间 14:00）
# 2. 配置信息存储在 KV 中：
#    - TELEGRAM_BOT_TOKEN
#    - TELEGRAM_CHAT_ID
#    - API_KEY

[[routes]]
pattern = "cp.gitman.de5.net"
custom_domain = true

